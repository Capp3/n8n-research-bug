# =============================================================================
# n8n Research Bug - Sample Environment Configuration
# =============================================================================
# Copy this file to .env and customize the values for your environment
# This file contains all environment variables for Docker Compose services
# and the prompt-server application with PostgreSQL chat memory support

# =============================================================================
# DOCKER COMPOSE SERVICE CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
SUPPORT_REDIS_PORT=6379

# -----------------------------------------------------------------------------
# PostgreSQL Database Configuration
# -----------------------------------------------------------------------------
# These variables are used by the Docker Compose PostgreSQL services
SUPPORT_POSTGRES_PASSWORD=support-password
SUPPORT_POSTGRES_USER=support-user
SUPPORT_POSTGRES_DB=support
SUPPORT_POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# Adminer Database Management Interface
# -----------------------------------------------------------------------------
SUPPORT_ADMINER_PORT=8080

# -----------------------------------------------------------------------------
# NocoDB PostgreSQL Configuration
# -----------------------------------------------------------------------------
NOCODB_POSTGRES_PASSWORD=nocodb-password
NOCODB_POSTGRES_USER=nocodb-user
NOCODB_POSTGRES_DB=nocodb
NOCODB_POSTGRES_PORT=5435

# -----------------------------------------------------------------------------
# NocoDB Application Configuration
# -----------------------------------------------------------------------------
NOCODB_PORT=8080
NOCODB_JWT_SECRET=change-me

# -----------------------------------------------------------------------------
# Research MCP Servers Configuration
# -----------------------------------------------------------------------------
# Brave Search MCP - Web search capabilities
BRAVE_SEARCH_PORT=3002
BRAVE_API_KEY=your-brave-api-key-here

# Wikipedia MCP - Knowledge base access
WIKIPEDIA_PORT=3003

# Firecrawl MCP - Advanced web scraping
FIRECRAWL_API_KEY=your-firecrawl-api-key-here

# -----------------------------------------------------------------------------
# n8n-MCP Server Configuration
# -----------------------------------------------------------------------------
# n8n-MCP Server - AI-powered n8n workflow builder
# N8N_MCP_PORT=3001
# N8N_MCP_HOST=0.0.0.0

# n8n API Configuration (for n8n-MCP integration)
# N8N_API_URL=http://n8n:5678
# N8N_API_KEY=your-n8n-api-key-here

# Optional: n8n docs path for enhanced node information
# N8N_DOCS_PATH=./n8n-docs

# Logging and Debug Configuration
# N8N_MCP_LOG_LEVEL=info
# N8N_MCP_DEBUG=false

# =============================================================================
# POSTGRESQL CHAT MEMORY CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# Chat Memory Database Connection - Dedicated PostgreSQL Instance
# -----------------------------------------------------------------------------
# Chat database host (use 'localhost' when connecting from host to Docker container)
CHAT_DB_HOST=localhost

# Chat database port (dedicated chat PostgreSQL instance)
CHAT_DB_PORT=5433

# Chat database name (dedicated for conversation storage)
CHAT_DB_NAME=chat_memory

# Chat database user (dedicated chat user)
CHAT_DB_USER=chat-user

# Chat database password (dedicated chat password)
CHAT_DB_PASSWORD=your-chat-password-here

# PostgreSQL environment variables for Docker Compose
SUPPORT_POSTGRES_CHAT_PASSWORD=your-chat-password-here
SUPPORT_POSTGRES_CHAT_USER=chat-user
SUPPORT_POSTGRES_CHAT_DB=chat_memory
SUPPORT_POSTGRES_CHAT_PORT=5433

# Enable SSL connection (set to 'true' for production with SSL)
DB_SSL=false

# -----------------------------------------------------------------------------
# Chat Memory Settings
# -----------------------------------------------------------------------------
# Number of days to keep chat memories before cleanup (30 days)
CHAT_MEMORY_TTL_DAYS=30

# Maximum number of messages per conversation (1000 messages)
MAX_CONVERSATION_LENGTH=1000

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# Debug Settings
# -----------------------------------------------------------------------------
# Enable debug logging (set to 'chat-memory:*' for chat memory debug logs)
# DEBUG=chat-memory:*

# -----------------------------------------------------------------------------
# Development Overrides
# -----------------------------------------------------------------------------
# Uncomment and modify these for development/testing

# Use local prompts instead of GitHub
# PROMPTS_INDEX_URL=http://localhost:3000/prompts/index.json
# PROMPTS_BASE_RAW=http://localhost:3000/

# Use different database for testing
# DB_NAME=support_test
# SUPPORT_POSTGRES_DB=support_test

# Enable more verbose logging
# INDEX_TTL_MS=60000
# TEMPLATE_TTL_MS=60000
# SYS_TTL_MS=60000

# =============================================================================
# PRODUCTION CONFIGURATION NOTES
# =============================================================================

# For production deployment, consider the following changes:

# 1. Security
# - Change all default passwords to strong, unique values
# - Enable SSL for database connections (DB_SSL=true)
# - Use environment-specific secrets management

# 2. Performance
# - Adjust cache TTL values based on usage patterns
# - Configure appropriate resource limits in Docker Compose
# - Monitor database connection pool usage

# 3. Monitoring
# - Enable debug logging for troubleshooting
# - Set up database monitoring and alerting
# - Configure log aggregation

# 4. Backup
# - Set up regular database backups
# - Test backup restoration procedures
# - Consider point-in-time recovery

# =============================================================================
# n8n-MCP SERVER INFORMATION
# =============================================================================

# The n8n-MCP server is an AI-powered tool for building n8n workflows using
# the Model Context Protocol (MCP). It provides:
#
# - AI-assisted workflow creation and editing
# - Node discovery and configuration assistance
# - Workflow validation and optimization
# - Integration with Claude Desktop, Cursor, and other MCP-compatible tools
#
# To enable n8n-MCP:
# 1. Uncomment the n8n-mcp service in compose.yml
# 2. Uncomment the N8N_MCP_* variables below
# 3. Set up your n8n instance and API key
# 4. Run: docker compose up -d
#
# For more information, visit: https://github.com/czlonkowski/n8n-mcp

# =============================================================================
# USAGE INSTRUCTIONS
# =============================================================================

# 1. Copy this file to .env:
#    cp sample.env .env

# 2. Customize the values for your environment

# 3. Start the services:
#    docker compose up -d

# 4. Start the prompt server:
#    cd prompt-server
#    npm install
#    npm start

# 5. Access the services:
#    - Prompt Server: http://localhost:3000
#    - Adminer (DB Admin): http://localhost:8080
#    - Redis: localhost:6379
#    - PostgreSQL: localhost:5432
#    - n8n-MCP: http://localhost:3001 (when enabled)

# 6. Test the chat memory system:
#    cd prompt-server
#    node test-db-connection.js
